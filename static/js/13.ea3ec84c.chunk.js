(this["webpackJsonpboba-watch"]=this["webpackJsonpboba-watch"]||[]).push([[13],{281:function(e,t,n){"use strict";var c=n(8),a=n(1);t.a=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)([]),r=Object(c.a)(s,2),i=r[0],u=r[1],l=Object(a.useCallback)((function(){o(JSON.parse(localStorage.getItem("drinkids")))}),[]);return Object(a.useEffect)(l,[l]),Object(a.useEffect)((function(){u(n.map((function(e){return JSON.parse(localStorage.getItem(e))})))}),[n]),{drinkids:n,drinks:i,update:l}}},282:function(e,t,n){"use strict";var c=n(9),a=n(8),o=n(1);t.a=function(){var e=Object(o.useState)({}),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(o.useState)(null),i=Object(a.a)(r,2),u=i[0],l=i[1],d=function(e){l(e.message)},j=function(e){var t=e.coords,n=e.timestamp;s({accuracy:t.accuracy,alt:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,lat:t.latitude,lng:t.longitude,timestamp:n})};return Object(o.useEffect)((function(){navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(j,d,{}):l("Geolocation is not supported")}),[]),Object(c.a)(Object(c.a)({},n),{},{error:u})}},283:function(e,t,n){"use strict";var c=n(1);t.a=function(){return{getLocationsNearby:Object(c.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c="https://us-central1-boba-watch-firebase.cloudfunctions.net/locator";fetch(c+"?"+new URLSearchParams(e).toString()).then((function(e){return e.json()})).then(t).catch(n)}),[]),getLocationsByText:Object(c.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c="https://us-central1-boba-watch-firebase.cloudfunctions.net/nearbyLocations";fetch(c+"?"+new URLSearchParams(e).toString()).then((function(e){return e.json()})).then(t).catch(n)}),[])}}},284:function(e,t,n){"use strict";var c=n(8),a=n(1),o=n(11),s=n(42),r=n(30),i=n(61);t.a=function(e){var t=Object(a.useState)(Object(i.c)()),n=Object(c.a)(t,2),u=n[0],l=n[1],d=Object(a.useContext)(r.a),j=Object(c.a)(d,1)[0];return Object(a.useEffect)((function(){if(void 0===e||j.uid===e)return l(JSON.parse(localStorage.getItem("metrics")));l({}),o.b.collection("users/".concat(e,"/user")).doc("stats").get().then((function(e){l(e.data())})).catch(s.a)}),[e,j.uid]),u}},291:function(e,t,n){e.exports={container:"Listing_container__15GQ1",center:"Listing_center__17arw",distance:"Listing_distance__3MU9m",address:"Listing_address__3UQFM"}},292:function(e,t,n){"use strict";n.d(t,"a",(function(){return c.a})),n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return o.a}));n(91);var c=n(34),a=n(281),o=n(283);n(282),n(8),n(1),n(93),n(284),n(92)},327:function(e,t,n){e.exports={button:"SearchAreaButton_button__2rtPN"}},328:function(e,t,n){e.exports={popup:"StoreMarker_popup__wTD9d"}},334:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return L}));var c=n(1),a=n(39),o=n(291),s=n.n(o),r=n(2),i=function(e){var t,n=e.data,o=e.selected,i=e.setCenter,u=n.venue.id,l=Object(c.useRef)(null);return Object(c.useEffect)((function(){o===u&&l.current.scrollIntoView({behavior:"smooth"})}),[o,u]),Object(r.jsxs)(a.a,{className:s.a.container,forwardedref:l,children:[Object(r.jsx)("h3",{children:n.venue.name}),Object(r.jsxs)("p",{className:s.a.distance,children:[Object(r.jsx)("span",{children:(t=n.venue.location.distance,t>1e3?(t/1e3).toFixed(2)+" km":t+" meters")})," from search pin"]}),Object(r.jsx)("p",{className:s.a.address,children:n.venue.location.formattedAddress.join(", ")}),Object(r.jsx)("span",{className:s.a.center,onClick:function(){i([n.venue.location.lat,n.venue.location.lng])},children:"CENTER ON MAP"})]})},u=Object(c.memo)(i),l=function(){return Object(r.jsxs)(a.a,{className:s.a.container,children:[Object(r.jsx)("h3",{children:"no places nearby :("}),Object(r.jsx)("p",{className:s.a.distance,children:"We can't seem to find any boba places near you. Try searching a different part of the map."})]})},d=function(){return Object(r.jsxs)(a.a,{className:s.a.container,children:[Object(r.jsx)("h3",{children:"Loading...."}),Object(r.jsxs)("p",{className:s.a.distance,children:["Trying to find places near you. If this is taking too long, check your internet and try again.",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),"Make sure you have your location enabled otherwise you will need to manually search"]})]})},j=Object(c.memo)(d),b=u,f=n(355),p=n(19),O=n(292),h=n(327),m=n.n(h),v=function(e){var t=e.className,n=e.position,a=e.setStores,o=e.filters,s=Object(f.a)(),i=Object(O.c)().getLocationsNearby,u=Object(c.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"map";switch(t){case"user":e={lat:n[0],lng:n[1]};break;case"map":default:e=s.getCenter()}var c={lat:e.lat,lng:e.lng,open:o.openNow?"true":"false",coffee:o.coffee?"true":"false"};a(null),i(c,(function(e){a(e.response.groups[0].items)}),(function(e){console.error("ERROR:",e),a([])}))}),[s,n,a,o,i]);return Object(c.useEffect)((function(){n&&u("user")}),[n,u]),Object(r.jsx)("button",{className:Object(p.a)(m.a.button,t),onClick:u,children:"Search this area"})},g=Object(c.memo)(v),x=n(509),_=n(354),N=n(50),k=n(328),S=n.n(k),y=function(e){var t=e.data,n=e.setCenter,c=e.setSelected,a=t.venue.location;return Object(r.jsx)(x.a,{center:[a.lat,a.lng],radius:10,fill:!0,weight:1,color:"#F68080",fillColor:"#F68080",fillOpacity:"0.5",eventHandlers:{click:function(){n([a.lat,a.lng]),c(t.venue.id)}},children:Object(r.jsx)(_.a,{children:Object(r.jsxs)("div",{className:S.a.popup,children:[Object(r.jsx)("h3",{children:t.venue.name}),Object(r.jsx)("span",{children:t.venue.location.address}),Object(r.jsx)(N.b,{to:"/add",state:{address:t.venue.location,location:t.venue.name},children:"Add drink for this location"})]})})})},L=Object(c.memo)(y)},354:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n(497),a=n(295),o=n(1),s=Object(c.a)((function(e,t){return{instance:new a.Popup(e,t.overlayContainer),context:t}}),(function(e,t,n,c){var a=n.onClose,s=n.onOpen,r=n.position;Object(o.useEffect)((function(){var n=e.instance;function o(e){e.popup===n&&(n.update(),c(!0),null==s||s())}function i(e){e.popup===n&&(c(!1),null==a||a())}return t.map.on({popupopen:o,popupclose:i}),null==t.overlayContainer?(null!=r&&n.setLatLng(r),n.openOn(t.map)):t.overlayContainer.bindPopup(n),function(){t.map.off({popupopen:o,popupclose:i}),t.map.removeLayer(n)}}),[e,t,c,a,s,r])}))},355:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(304);n(1);function a(){return Object(c.c)().map}},458:function(e,t,n){e.exports={container:"DesktopLocator_container__23JrQ",title:"DesktopLocator_title__27VDe",map:"DesktopLocator_map__3pFsp",details:"DesktopLocator_details__3AOIX",filters:"DesktopLocator_filters__tRQLI",selected:"DesktopLocator_selected__1kX3a",toggle:"DesktopLocator_toggle__BdWR4","list-holder":"DesktopLocator_list-holder__1FjGt",list:"DesktopLocator_list__200Se"}},507:function(e,t,n){"use strict";n.r(t);var c=n(54),a=n(9),o=n(8),s=n(1),r=n(19),i=n(39),u=n(334),l=n(458),d=n.n(l),j=n(2),b=function(e){var t=e.theme,n=Object(s.useState)(null),l=Object(o.a)(n,2),b=l[0],f=l[1],p=Object(s.useState)(null),O=Object(o.a)(p,2),h=O[0],m=O[1],v=Object(s.useState)(null),g=Object(o.a)(v,2),x=g[0],_=g[1],N=Object(s.useState)({openNow:!1,coffee:!1}),k=Object(o.a)(N,2),S=k[0],y=k[1],L=function(e,t){y((function(n){return Object(a.a)(Object(a.a)({},n),{},Object(c.a)({},e,void 0!==t?t:!n[e]))}))};return Object(j.jsxs)("main",{className:d.a.container,children:[Object(j.jsx)("header",{children:Object(j.jsx)("h1",{className:d.a.title,children:"Boba Locator"})}),Object(j.jsx)(i.d,{className:d.a.map,zoom:12,center:x,setCenter:_,theme:t,children:function(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(u.d,{position:e,setStores:f,filters:S}),b&&b.map((function(e){return Object(j.jsx)(u.e,{data:e,setSelected:m,setCenter:_},e.venue.id)}))]})}}),Object(j.jsxs)("div",{className:d.a.details,children:[Object(j.jsxs)(i.a,{className:d.a.filters,title:"locations",children:[Object(j.jsx)("button",{className:Object(r.a)(S.openNow&&d.a.selected),onClick:function(){L("openNow")},children:"OPEN NOW"}),Object(j.jsxs)("div",{className:d.a.toggle,children:[Object(j.jsx)("button",{className:Object(r.a)(!S.coffee&&d.a.selected),onClick:function(){return L("coffee",!1)},children:"BOBA"}),Object(j.jsx)("button",{className:Object(r.a)(S.coffee&&d.a.selected),onClick:function(){return L("coffee",!0)},children:"COFFEE"})]})]}),Object(j.jsx)("div",{className:d.a["list-holder"],children:Object(j.jsxs)("div",{className:d.a.list,children:[!b&&Object(j.jsx)(u.c,{}),b&&0===b.length&&Object(j.jsx)(u.a,{}),b&&b.map((function(e){return Object(j.jsx)(u.b,{data:e,selected:h,setCenter:_},e.venue.id)}))]})})]})]})},f=Object(s.memo)(b);t.default=f}}]);
//# sourceMappingURL=13.ea3ec84c.chunk.js.map