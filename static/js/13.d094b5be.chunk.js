(this["webpackJsonpboba-watch"]=this["webpackJsonpboba-watch"]||[]).push([[13],{298:function(e,t,n){"use strict";var c=n(9),a=n(1);t.a=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)([]),r=Object(c.a)(s,2),i=r[0],u=r[1],l=Object(a.useCallback)((function(){o(JSON.parse(localStorage.getItem("drinkids")))}),[]);return Object(a.useEffect)(l,[l]),Object(a.useEffect)((function(){u(n.map((function(e){return JSON.parse(localStorage.getItem(e))})))}),[n]),{drinkids:n,drinks:i,update:l}}},300:function(e,t,n){"use strict";var c=n(8),a=n(9),o=n(1);t.a=function(){var e=Object(o.useState)({}),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(o.useState)(null),i=Object(a.a)(r,2),u=i[0],l=i[1],d=function(e){l(e.message)},b=function(e){var t=e.coords,n=e.timestamp;s({accuracy:t.accuracy,alt:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,lat:t.latitude,lng:t.longitude,timestamp:n})};return Object(o.useEffect)((function(){navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(b,d,{}):l("Geolocation is not supported")}),[]),Object(c.a)(Object(c.a)({},n),{},{error:u})}},301:function(e,t,n){"use strict";var c=n(9),a=n(1),o=n(11),s=n(46),r=n(34),i=n(52);t.a=function(e){var t=Object(a.useState)(Object(i.c)()),n=Object(c.a)(t,2),u=n[0],l=n[1],d=Object(a.useContext)(r.a),b=Object(c.a)(d,1)[0];return Object(a.useEffect)((function(){if(void 0===e||b.uid===e)return l(JSON.parse(localStorage.getItem("metrics")));l({}),o.b.collection("users/".concat(e,"/user")).doc("stats").get().then((function(e){l(e.data())})).catch(s.a)}),[e,b.uid]),u}},304:function(e,t,n){"use strict";var c=n(1);t.a=function(){return{getLocationsNearby:Object(c.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c="https://us-central1-boba-watch-firebase.cloudfunctions.net/locator";fetch(c+"?"+new URLSearchParams(e).toString()).then((function(e){return e.json()})).then(t).catch(n)}),[]),getLocationsByText:Object(c.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c="https://us-central1-boba-watch-firebase.cloudfunctions.net/nearbyLocations";fetch(c+"?"+new URLSearchParams(e).toString()).then((function(e){return e.json()})).then(t).catch(n)}),[])}}},308:function(e,t,n){e.exports={container:"Listing_container__15GQ1",center:"Listing_center__17arw",distance:"Listing_distance__3MU9m",address:"Listing_address__3UQFM"}},322:function(e,t,n){"use strict";n.d(t,"a",(function(){return c.a})),n.d(t,"b",(function(){return a.a}));n(102);var c=n(35),a=(n(298),n(304));n(300),n(9),n(1),n(104),n(301),n(103)},348:function(e,t,n){e.exports={button:"SearchAreaButton_button__2rtPN"}},349:function(e,t,n){e.exports={popup:"StoreMarker_popup__wTD9d"}},356:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return x})),n.d(t,"e",(function(){return w}));var c=n(1),a=n(273),o=n(43),s=n(308),r=n.n(s),i=n(2),u=function(e){var t,n=e.data,s=e.selected,u=e.setCenter,l=Object(a.a)().t,d=n.venue.id,b=Object(c.useRef)(null);return Object(c.useEffect)((function(){s===d&&b.current.scrollIntoView({behavior:"smooth"})}),[s,d]),Object(i.jsxs)(o.a,{className:r.a.container,forwardedref:b,children:[Object(i.jsx)("h3",{children:n.venue.name}),Object(i.jsxs)("p",{className:r.a.distance,children:[Object(i.jsx)("span",{children:(t=n.venue.location.distance,t>1e3?(t/1e3).toFixed(2)+" "+l("km"):t+" "+l("meters"))})," ",l("from search pin")]}),Object(i.jsx)("p",{className:r.a.address,children:n.venue.location.formattedAddress.join(", ")}),Object(i.jsx)("span",{className:r.a.center,onClick:function(){u([n.venue.location.lat,n.venue.location.lng])},children:l("center on map")})]})},l=Object(c.memo)(u),d=function(){return Object(i.jsxs)(o.a,{className:r.a.container,children:[Object(i.jsx)("h3",{children:"no places nearby :("}),Object(i.jsx)("p",{className:r.a.distance,children:"We can't seem to find any boba places near you. Try searching a different part of the map."})]})},b=function(){return Object(i.jsxs)(o.a,{className:r.a.container,children:[Object(i.jsx)("h3",{children:"Loading...."}),Object(i.jsxs)("p",{className:r.a.distance,children:["Trying to find places near you. If this is taking too long, check your internet and try again.",Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),"Make sure you have your location enabled otherwise you will need to manually search"]})]})},j=Object(c.memo)(b),f=l,p=n(377),O=n(18),h=n(322),m=n(348),v=n.n(m),g=function(e){var t=e.className,n=e.position,o=e.setStores,s=e.filters,r=Object(a.a)().t,u=Object(p.a)(),l=Object(h.b)().getLocationsNearby,d=Object(c.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"map";switch(t){case"user":e={lat:n[0],lng:n[1]};break;case"map":default:e=u.getCenter()}var c={lat:e.lat,lng:e.lng,open:s.openNow?"true":"false",coffee:s.coffee?"true":"false"};o(null),l(c,(function(e){o(e.response.groups[0].items)}),(function(e){console.error("ERROR:",e),o([])}))}),[u,n,o,s,l]);return Object(c.useEffect)((function(){n&&d("user")}),[n,d]),Object(i.jsx)("button",{className:Object(O.a)(v.a.button,t),onClick:d,children:r("search this area")})},x=Object(c.memo)(g),_=n(533),k=n(376),N=n(62),S=n(349),y=n.n(S),L=function(e){var t=e.data,n=e.setCenter,c=e.setSelected,o=Object(a.a)().t,s=t.venue.location;return Object(i.jsx)(_.a,{center:[s.lat,s.lng],radius:10,fill:!0,weight:1,color:"#F68080",fillColor:"#F68080",fillOpacity:"0.5",eventHandlers:{click:function(){n([s.lat,s.lng]),c(t.venue.id)}},children:Object(i.jsx)(k.a,{children:Object(i.jsxs)("div",{className:y.a.popup,children:[Object(i.jsx)("h3",{children:t.venue.name}),Object(i.jsx)("span",{children:t.venue.location.address}),Object(i.jsx)(N.b,{to:"/add",state:{address:t.venue.location,location:t.venue.name},children:o("add drink for this location")})]})})})},w=Object(c.memo)(L)},376:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n(519),a=n(311),o=n(1),s=Object(c.a)((function(e,t){return{instance:new a.Popup(e,t.overlayContainer),context:t}}),(function(e,t,n,c){var a=n.onClose,s=n.onOpen,r=n.position;Object(o.useEffect)((function(){var n=e.instance;function o(e){e.popup===n&&(n.update(),c(!0),null==s||s())}function i(e){e.popup===n&&(c(!1),null==a||a())}return t.map.on({popupopen:o,popupclose:i}),null==t.overlayContainer?(null!=r&&n.setLatLng(r),n.openOn(t.map)):t.overlayContainer.bindPopup(n),function(){t.map.off({popupopen:o,popupclose:i}),t.map.removeLayer(n)}}),[e,t,c,a,s,r])}))},377:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(320);n(1);function a(){return Object(c.c)().map}},481:function(e,t,n){e.exports={container:"DesktopLocator_container__23JrQ",title:"DesktopLocator_title__27VDe",map:"DesktopLocator_map__3pFsp",details:"DesktopLocator_details__3AOIX",filters:"DesktopLocator_filters__tRQLI",selected:"DesktopLocator_selected__1kX3a",toggle:"DesktopLocator_toggle__BdWR4","list-holder":"DesktopLocator_list-holder__1FjGt",list:"DesktopLocator_list__200Se"}},531:function(e,t,n){"use strict";n.r(t);var c=n(66),a=n(8),o=n(9),s=n(1),r=n(273),i=n(18),u=n(43),l=n(356),d=n(481),b=n.n(d),j=n(2),f=function(e){var t=e.theme,n=Object(r.a)().t,d=Object(s.useState)(null),f=Object(o.a)(d,2),p=f[0],O=f[1],h=Object(s.useState)(null),m=Object(o.a)(h,2),v=m[0],g=m[1],x=Object(s.useState)(null),_=Object(o.a)(x,2),k=_[0],N=_[1],S=Object(s.useState)({openNow:!1,coffee:!1}),y=Object(o.a)(S,2),L=y[0],w=y[1],C=function(e,t){w((function(n){return Object(a.a)(Object(a.a)({},n),{},Object(c.a)({},e,void 0!==t?t:!n[e]))}))};return Object(j.jsxs)("main",{className:b.a.container,children:[Object(j.jsx)("header",{children:Object(j.jsx)("h1",{className:b.a.title,children:n("boba locator")})}),Object(j.jsx)(u.d,{className:b.a.map,zoom:12,center:k,setCenter:N,theme:t,children:function(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l.d,{position:e,setStores:O,filters:L}),p&&p.map((function(e){return Object(j.jsx)(l.e,{data:e,setSelected:g,setCenter:N},e.venue.id)}))]})}}),Object(j.jsxs)("div",{className:b.a.details,children:[Object(j.jsxs)(u.a,{className:b.a.filters,title:n("locations"),children:[Object(j.jsx)("button",{className:Object(i.a)(L.openNow&&b.a.selected),onClick:function(){C("openNow")},children:n("open now")}),Object(j.jsxs)("div",{className:b.a.toggle,children:[Object(j.jsx)("button",{className:Object(i.a)(!L.coffee&&b.a.selected),onClick:function(){return C("coffee",!1)},children:n("boba")}),Object(j.jsx)("button",{className:Object(i.a)(L.coffee&&b.a.selected),onClick:function(){return C("coffee",!0)},children:n("coffee")})]})]}),Object(j.jsx)("div",{className:b.a["list-holder"],children:Object(j.jsxs)("div",{className:b.a.list,children:[!p&&Object(j.jsx)(l.c,{}),p&&0===p.length&&Object(j.jsx)(l.a,{}),p&&p.map((function(e){return Object(j.jsx)(l.b,{data:e,selected:v,setCenter:N},e.venue.id)}))]})})]})]})},p=Object(s.memo)(f);t.default=p}}]);
//# sourceMappingURL=13.d094b5be.chunk.js.map