"use strict";(self.webpackChunkboba_watch=self.webpackChunkboba_watch||[]).push([[609],{3798:function(e,t,s){function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var s=parseInt(e/100);return isNaN(s)?"---":s}var a=Number(e/100).toFixed(2);return isNaN(a)?"---":a}s.d(t,{K:function(){return a}})},4609:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var a=s(1413),n=s(885),i=s(2791),l=s(8182),r=s(3168),c=s(7595),o=s(5429),d=s(3798),h=s(4796),m=s(5135),u=s(6871),p=s(910),x=s(4674),j=s(1951),f=s(1956),v=s(9201),N=s(184),g=function(e){var t=e.data,s=e.triggerUpdate,l=e.theme,g=(0,i.useContext)(x.Z),b=(0,n.Z)(g,1)[0],Z=(0,r.$)(),_=Z.i18n,y=Z.t,S=(0,i.useState)(!1),k=(0,n.Z)(S,2),w=k[0],M=k[1],H=(0,u.s0)(),C=new Date(t.date);return(0,N.jsxs)("div",{className:"drink-panel",children:[(0,N.jsxs)("div",{className:"info",onClick:function(){M(!w)},children:[(0,N.jsx)("p",{className:"place",children:t.location}),(0,N.jsxs)("p",{className:"price",children:[y("$"),(0,d.K)(t.price)]}),(0,N.jsx)("div",{className:"expand-icon",children:w?(0,N.jsx)(c.Z,{}):(0,N.jsx)(o.Z,{})}),(0,N.jsx)("p",{className:"name",children:t.name}),(0,N.jsx)("p",{className:"time",children:(0,j.Z)(C,"M/dd h:mm a",{locale:"zh-TW"===_.language?f.Z:v.Z})})]}),(0,N.jsxs)("div",{className:"collapsed-info"+(w?" expanded":""),children:[(0,N.jsx)(E,(0,a.Z)((0,a.Z)({},t),{},{theme:l,expanded:w,date:C})),(0,N.jsxs)("div",{className:"options",children:[(0,N.jsx)("button",{className:"text",onClick:function(){H("/edit/"+t.id)},children:y("EDIT")}),(0,N.jsx)("button",{className:"text",onClick:function(){m.Fs.collection("users/".concat(b.uid,"/drinks")).doc(t.id).delete().then((function(){var e=(0,h.Tq)(t.id);e.d=JSON.stringify(e.d),m.Fs.collection("users/".concat(b.uid,"/user")).doc("stats").set(e).finally((function(){(0,p.b7)(),s(JSON.parse(localStorage.getItem("drinkids")))}))})).catch((function(e){(0,p.bI)(e)}))},children:y("DELETE")})]})]})]})},b=(0,i.memo)(g),Z=s(5861),_=s(7757),y=s.n(_),S=s(5613),k=s(6433),w=s(500),M=function(e){var t=e.name,s=e.location,a=e.description,l=e.theme,c=e.expanded,o=e.address,d=e.image,h=e.date,m=(0,r.$)().t,u=(0,i.useState)(!1),p=(0,n.Z)(u,2),x=p[0],j=p[1];return(0,i.useEffect)((function(){c&&d&&(0,Z.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=j,e.next=3,(0,S.Vq)(d);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[d,c]),(0,N.jsxs)("div",{className:"expanded-drink-description--wrapper",children:[o&&(0,N.jsx)(k.D5,{className:"map",theme:l,scrollWheelZoom:!1,hasCenterButton:!1,zoom:10,center:[o.lat,o.lng],children:(0,N.jsx)(w.c,{center:[o.lat,o.lng],radius:10,fill:!0,weight:1,color:"#F68080",fillColor:"#F68080",fillOpacity:"0.5"})}),(0,N.jsxs)("p",{className:"title",children:[t,(0,N.jsx)("br",{}),(0,N.jsxs)("span",{children:["@",s]})]}),x&&(0,N.jsx)("img",{src:x,className:"user-uploaded",alt:"user-upload"}),(0,N.jsx)("br",{}),(0,N.jsx)("div",{className:"description",children:(0,N.jsx)(k.sf,{card:!1,description:a})}),(0,N.jsx)("br",{}),(0,N.jsxs)("p",{className:"date",children:[(0,N.jsx)("span",{children:m("on")})," ",h.toString()]})]})},E=(0,i.memo)(M),H={container:"MobileHistory_container__fZs88",title:"MobileHistory_title__DgEAm",header:"MobileHistory_header__Xz8gi",search:"MobileHistory_search__usHUq",history:"MobileHistory_history__WcUxY",bw:"MobileHistory_bw__Zc9AP",total:"MobileHistory_total__o4yXi","none-label":"MobileHistory_none-label__Hyic6","load-more":"MobileHistory_load-more__X7z5n","thaman-color":"MobileHistory_thaman-color__-j+SU"},C=function(e){var t=e.click;return(0,N.jsx)("div",{className:H["thaman-color"],children:(0,N.jsx)("div",{className:H["load-more"],onClick:t,children:"\u2022 \u2022 \u2022"})})},D=function(e){var t=e.label,s=(0,r.$)().t;return(0,N.jsx)("div",{className:(0,l.Z)(H["thaman-color"],H["none-label"]),children:(0,N.jsx)("h3",{className:(0,l.Z)(H.bw,H["none-label"]),children:s(t)})})},I=function(e){var t=e.theme,s=(0,r.$)().t,c=(0,i.useState)([]),o=(0,n.Z)(c,2),h=o[0],m=o[1],u=(0,i.useState)([]),p=(0,n.Z)(u,2),x=p[0],j=p[1],f=(0,i.useState)({complete:5,recent:7}),v=(0,n.Z)(f,2),g=v[0],Z=v[1],_=(0,i.useState)([]),y=(0,n.Z)(_,2),S=y[0],w=y[1],M=(0,i.useState)(JSON.parse(localStorage.getItem("drinkids"))),E=(0,n.Z)(M,2),I=E[0],O=E[1],q=(0,i.useState)(JSON.parse(localStorage.getItem("metrics"))),F=(0,n.Z)(q,2),U=F[0],$=F[1];(0,i.useEffect)((function(){$(JSON.parse(localStorage.getItem("metrics")));var e=[],s=[],n=[],i=new Date,l=i.getMonth(),r=i.getFullYear(),c=g.complete,o=g.recent;I.forEach((function(a){var i=JSON.parse(localStorage.getItem(a));n.push(i);var d=new Date(i.date),h=d.getMonth()===l&&d.getFullYear()===r;h&&o>0?(e.push((0,N.jsx)(b,{theme:t,triggerUpdate:O,data:i},i.id)),o--):!h&&c>0&&(s.push((0,N.jsx)(b,{theme:t,triggerUpdate:O,data:i},i.id)),c--)})),0===e.length&&(e.push((0,N.jsx)(D,{label:"no drinks this month ...yet"},"@ryqndev/empty")),0===s.length&&s.push((0,N.jsx)(D,{label:"Add a drink to start!"},"@ryqndev/empty"))),o<=0&&e.push((0,N.jsx)(C,{click:function(){Z((0,a.Z)((0,a.Z)({},g),{},{recent:g.recent+10}))}},"@ryqndev/load")),c<=0&&s.push((0,N.jsx)(C,{click:function(){Z((0,a.Z)((0,a.Z)({},g),{},{complete:g.complete+10}))}},"@ryqndev/load")),m(e),j(s),w(n)}),[I.length,t,I,g,g.recent,g.complete]);return(0,N.jsx)("div",{className:"page with-user",children:(0,N.jsxs)("div",{className:H.container,children:[(0,N.jsx)("div",{className:H.header,children:(0,N.jsx)("h3",{className:H.title,children:s("history")})}),(0,N.jsx)("div",{className:H.search,children:(0,N.jsx)(k.wD,{data:S,keys:["description","location","name","price"],Result:function(e){var s=e.item;e.matches;return(0,N.jsx)(b,{theme:t,triggerUpdate:O,data:s})}})}),(0,N.jsxs)("div",{className:H.list,children:[(0,N.jsx)("h3",{className:H.bw,children:s("Monthly Spending")}),(0,N.jsx)("div",{className:"history-spending",children:h}),(0,N.jsxs)("h3",{className:(0,l.Z)(H.bw,H.total),children:[(0,N.jsxs)("span",{children:[s("Monthly Total"),":"]})," ",s("$"),(0,d.K)(U.tc)]}),(0,N.jsx)("h3",{className:H.bw,children:s("Overall Spending")}),(0,N.jsx)("div",{className:"history-spending",children:x}),(0,N.jsxs)("h3",{className:(0,l.Z)(H.bw,H.total),children:[(0,N.jsxs)("span",{children:[s("Complete Total"),":"]})," ",s("$"),(0,d.K)(U.ctc)]})]})]})})},O=(0,i.memo)(I)},5429:function(e,t,s){var a=s(5318),n=s(862);t.Z=void 0;var i=n(s(2791)),l=(0,a(s(4894)).default)(i.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");t.Z=l},7595:function(e,t,s){var a=s(5318),n=s(862);t.Z=void 0;var i=n(s(2791)),l=(0,a(s(4894)).default)(i.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.Z=l}}]);
//# sourceMappingURL=609.623623e1.chunk.js.map